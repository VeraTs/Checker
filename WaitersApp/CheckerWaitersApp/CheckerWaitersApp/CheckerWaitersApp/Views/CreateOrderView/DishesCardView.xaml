<?xml version="1.0" encoding="UTF-8"?>
<ContentView xmlns="http://xamarin.com/schemas/2014/forms" 
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" 
             xmlns:viewmodels="clr-namespace:CheckerWaitersApp.ViewModels"
             xmlns:createOrderView="clr-namespace:CheckerWaitersApp.Views.CreateOrderView;assembly=CheckerWaitersApp"
             x:DataType="viewmodels:CreateOrderViewModel"
             x:Class="CheckerWaitersApp.Views.CreateOrderView.DishesCardView">
    <ContentView.Content>
        <Frame IsClippedToBounds="True"  
               HasShadow="True" 
               CornerRadius="0"
               Padding="0" 
               BackgroundColor="Transparent"
               BorderColor="Gray">
            <StackLayout BackgroundColor="Transparent">
                <Grid x:Name ="Grid"
                        VerticalOptions="CenterAndExpand"  
                        Padding="0"  Margin="0" 
                        HorizontalOptions="Fill"  
                        BackgroundColor="Transparent">
                    <Grid.RowDefinitions>
                        <RowDefinition Height=".2*"/>
                        <RowDefinition Height=".1*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width=".5*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width=".2*"/>
                    </Grid.ColumnDefinitions>

                    <BoxView Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="0" 
                             Color="CornflowerBlue"  
                             Margin="-6,0,-6,0"
                             HorizontalOptions="FillAndExpand"
                             VerticalOptions="FillAndExpand"/>

                    <Label Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="3"
                           Text ="Menu "
                           x:Name="m_LabelDishes"
                           FontAttributes ="Bold"
                           FontSize="Header"
                           FontFamily ="FAS"
                           HorizontalOptions="Center"
                           VerticalOptions="Center"/>

                    <SearchBar Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="1">
                    


                    </SearchBar>

                    <Frame  Grid.Row="2" Grid.Column="0"
                            HasShadow="True" 
                            CornerRadius="0"
                            Padding="0" 
                            BackgroundColor="Transparent"
                            BorderColor="Gray">
                        <StackLayout BackgroundColor="Azure">
                            <Label Text="Categories"
                                   FontFamily="FAS"
                                   FontSize="Title"
                                   FontAttributes="Bold"
                                   Margin="1"
                                   HorizontalOptions="Center"
                                   HeightRequest="50"/>
                            <Button Text="Starters"
                                    FontFamily="FAS"
                                    FontSize="Medium"
                                    FontAttributes="Bold"
                                    HeightRequest="100"
                                    CornerRadius="5"
                                    BackgroundColor="LightSkyBlue"
                                    Clicked="StartersButton_OnClicked"/>
                            <Button Text="Main"
                                    FontFamily="FAS"
                                    FontSize="Medium"
                                    FontAttributes="Bold"
                                    HeightRequest="100"
                                    CornerRadius="5"
                                    BackgroundColor="LightSkyBlue"
                                    Clicked="MainsButton_OnClicked"/>
                            <Button Text="Desserts"
                                    FontFamily="FAS"
                                    FontSize="Medium"
                                    FontAttributes="Bold"
                                    HeightRequest="100"
                                    CornerRadius="5"
                                    BackgroundColor="LightSkyBlue"
                                    Clicked="DessertsButton_OnClicked"/>
                            <Button Text="Drinks"
                                    FontFamily="FAS"
                                    FontSize="Medium"
                                    FontAttributes="Bold"
                                    CornerRadius="5"
                                    HeightRequest="100"
                                    BackgroundColor="LightSkyBlue"
                                    Clicked="DrinksButton_OnClicked"/>
                            <Button Text="All"
                                    FontFamily="FAS"
                                    FontSize="Medium"
                                    FontAttributes="Bold"
                                    CornerRadius="5"
                                    HeightRequest="120"
                                    BackgroundColor="LightSkyBlue"
                                    Clicked="AllDishesButton_OnClicked"/>
                        </StackLayout>
                    </Frame>

                    <BoxView Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="3"
                             Color="Black" 
                             HorizontalOptions="FillAndExpand"
                             VerticalOptions="End"
                             HeightRequest="2"
                             Margin="-5,0,-5,0" 
                             CornerRadius="20"/>
                    <StackLayout Grid.Column="1" Grid.Row="2"
                                 Margin="0,0,0,2"
                                 IsClippedToBounds="True">

                        <CollectionView x:Name="DishesView"
                                        Margin="5" 
                                        ItemsSource = "{Binding DishesOnView}" 
                                        SelectionMode="Single"
                                        HorizontalScrollBarVisibility="Always"
                                        ItemsUpdatingScrollMode="KeepItemsInView">
                            <CollectionView.ItemsLayout>
                                <LinearItemsLayout Orientation="Vertical"  ItemSpacing="10"/>
                            </CollectionView.ItemsLayout>
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <StackLayout>
                                        <StackLayout.GestureRecognizers>
                                            <TapGestureRecognizer NumberOfTapsRequired="1" Tapped="TapGestureRecognizer_OnTapped" />
                                            <TapGestureRecognizer NumberOfTapsRequired="2" Tapped="TapGestureRecognizer_OnDoubleTapped"/>
                                        </StackLayout.GestureRecognizers>
                                        <createOrderView:DishCardView Margin="0"
                                                                      VerticalOptions="StartAndExpand"
                                                                      HorizontalOptions="StartAndExpand"
                                                                      WidthRequest="750"
                                                                      IsClippedToBounds="True"
                                                                      Padding="0"/>
                                        <VisualStateManager.VisualStateGroups>
                                            <VisualStateGroup Name="CommonStates">
                                                <VisualState Name="Normal"/>
                                                <VisualState Name="Selected">
                                                    <VisualState.Setters>
                                                        <Setter Property="BackgroundColor" Value="Transparent"/>
                                                    </VisualState.Setters>
                                                </VisualState>
                                            </VisualStateGroup>
                                        </VisualStateManager.VisualStateGroups>
                                    </StackLayout>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                    </StackLayout>
                </Grid>
            </StackLayout>
        </Frame>
    </ContentView.Content>
</ContentView>